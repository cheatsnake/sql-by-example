# SQL на примерах

SQL (Structured Query Language) – это специальный язык запросов для работы с реляционными базами данных (например [MySQL](https://ru.wikipedia.org/wiki/MySQL), [PostgreSQL](https://ru.wikipedia.org/wiki/PostgreSQL), [Oracle](https://ru.wikipedia.org/wiki/Oracle_Database), [MariaDB](https://ru.wikipedia.org/wiki/MariaDB)). SQL-запросы строятся из набора операторов, которые представляют из себя обычные слова английского языка.

> Все приведенные примеры были успешно протестированы в PostgreSQL версии 15.

## Основы SQL

В данном разделе рассматриваются примеры основных операций (созданиe/получениe/изменениe/удалениe) для работы с данными в SQL-таблицах.

### Создание новой базы данных

Создает новую базу данных, в которой можно определять неограниченное количество таблиц и наполнять их данными.

```sql
CREATE DATABASE store;
```

> Заметьте, что каждый SQL-запрос заканчивается точкой с запятой.

### Создание таблицы

На этапе создания таблицы указываются типы данных и определяются различные атрибуты для всех столбцов.

```sql
CREATE TABLE clients (
    id SERIAL PRIMARY KEY,
    firstName VARCHAR(50),
    lastName VARCHAR(50),
    email VARCHAR(50) UNIQUE,
    phone VARCHAR(20) UNIQUE,
    age SMALLINT,
    gender VARCHAR(6),
    isMarried BOOLEAN,
    createdAt TIMESTAMP,
    updatedAt TIMESTAMP
);
```

### Типы данных

Ниже приведен список возможных типов для базы данных PostgreSQL.

> В других СУБД приведенные типы данных и их описание может немного отличаться. Поэтому при возникновении ошибок обратитесь к документации.

#### Числовые типы

| Тип                         | Значения                                                              | Описание                                                                                                                                                       |
| :-------------------------- | :-------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `smallint` `int2`           | Числа от -32768 до +32767                                             | Занимает 2 байта.                                                                                                                                              |
| `integer` `int4` `int`      | Числа от -2147483648 до +2147483647                                   | Занимает 4 байта.                                                                                                                                              |
| `bigint` `int8`             | Числа от -9223372036854775808 до +9223372036854775807                 | Занимает 8 байт.                                                                                                                                               |
| `numeric` `decimal`         | Числа с целой часть до 131072 знаков и до 131072 знаков после запятой | Принимает 2 параметра precision (общее количество цифр) и scale (количество цифр после запятой). <br> _numeric(5, 3) – 22,725_ <br> _decimal(10, 1) – 52538,4_ |
| `real` `float4`             | Числа от 1E-37 до 1E+37                                               | Занимает 4 байта.                                                                                                                                              |
| `double precision` `float8` | Числа от от 1E-307 до 1E+308                                          | Занимает 8 байт.                                                                                                                                               |
| `serial`                    | Автоинкрементирующееся числовые значения от 1 до 2147483647           | Занимает 4 байта. Значение для данного типа подбираются автоматом в зависимости от значений предыдущего элемента. Отлично подходит для уникальных ID.          |
| `smallserial`               | Автоинкрементирующееся числовые значения от 1 до 32767                | Занимает 2 байта.                                                                                                                                              |
| `bigserial`                 | Автоинкрементирующееся числовые значения от 1 до 9223372036854775807  | Занимает 8 байт.                                                                                                                                               |

#### Символьные типы

| Тип                           | Значения                   | Описание                                                                                                               |
| :---------------------------- | :------------------------- | :--------------------------------------------------------------------------------------------------------------------- |
| `character` `char`            | Строки фиксированной длины | Принимает параметр, который задает количество символов в строке. <br> _char(5) – hello_                                |
| `character varying` `varchar` | Строки переменной длины    | Принимает параметр, который задает **максимальное** количество символов в строке. <br> _varchar(5) – abc, abcd, abcde_ |
| `text`                        | Текст произвольной длины   | Подойдет для хранения текста статей, отзывов, описаний.                                                                |

#### Бинарные типы

#### Даты и время

#### Логический тип

#### Интернет-адреса

#### Геометрические типы

#### Другие

### Атрибуты

### Добавление данных

### Выборка данных

### Поиск данных

### Сортировка и фильтрация

### Изменение данных

### Удаление данных

### Псевдонимы

### Изменение таблиц

### Агрегатные функции

Агрегатные (_aggregate – совокупный_) функции используются для обобщения/подсчета данных.
